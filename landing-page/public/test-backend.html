<!DOCTYPE html>
<html>
<head>
  <title>Backend Connection Test</title>
</head>
<body>
  <h1>Backend Connection Test</h1>
  <button onclick="testConnection()">Test Backend Connection</button>
  <pre id="result"></pre>

  <script>
    async function testConnection() {
      const resultEl = document.getElementById('result')
      resultEl.textContent = 'Testing...\n'
      
      const API_BASE = 'http://localhost:8000'
      
      console.log('üîç Testing backend connection...')
      console.log('API Base URL:', API_BASE)
      
      try {
        // Test 1: Simple health check
        resultEl.textContent += `\nTest 1: GET ${API_BASE}/health\n`
        const response = await fetch(`${API_BASE}/health`, {
          method: 'GET',
          headers: { 'Content-Type': 'application/json' }
        })
        
        if (response.ok) {
          const data = await response.json()
          resultEl.textContent += `‚úÖ Backend is reachable!\n`
          resultEl.textContent += `Status: ${response.status}\n`
          resultEl.textContent += `Response: ${JSON.stringify(data, null, 2)}\n`
          console.log('‚úÖ Backend is reachable:', data)
        } else {
          resultEl.textContent += `‚ùå Backend returned error: ${response.status} ${response.statusText}\n`
          console.error('‚ùå Backend returned error:', response.status, response.statusText)
        }
        
        // Test 2: Check CORS headers
        resultEl.textContent += `\nTest 2: CORS Headers\n`
        const corsHeaders = {
          'Access-Control-Allow-Origin': response.headers.get('Access-Control-Allow-Origin'),
          'Access-Control-Allow-Methods': response.headers.get('Access-Control-Allow-Methods'),
          'Access-Control-Allow-Headers': response.headers.get('Access-Control-Allow-Headers'),
        }
        resultEl.textContent += JSON.stringify(corsHeaders, null, 2) + '\n'
        
      } catch (error) {
        resultEl.textContent += `\n‚ùå Connection failed!\n`
        resultEl.textContent += `Error: ${error.message}\n`
        resultEl.textContent += `Error name: ${error.name}\n`
        console.error('‚ùå Connection failed:', error)
        console.error('   Error code:', error.code)
        console.error('   This usually means:')
        console.error('   1. Backend is not running')
        console.error('   2. Wrong port (check if backend is on port 8000)')
        console.error('   3. CORS blocking the request')
        console.error('   4. Firewall blocking connection')
      }
    }
  </script>
</body>
</html>


